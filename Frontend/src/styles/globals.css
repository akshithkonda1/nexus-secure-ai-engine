@tailwind base;
@tailwind components;
@tailwind utilities;

/* Let @apply resolve Tailwind utilities (v4) */
@reference "tailwindcss";

/* ── LIGHT TOKENS (used when theme is light) */
:root {
  --bg-app:#f6f7fb;
  --bg-panel:#ffffff;
  --ink:#0f172a;
  --muted:#64748b;
  --border:#e5e7eb;
  --ring:#93c5fd;
}

/* ── DARK TOKENS (default via .dark / data-theme="dark") */
:root[data-theme="dark"], .dark {
  --bg-app:#0b1220;
  --bg-panel:#121a2b;
  --ink:#e5e7eb;
  --muted:#94a3b8;
  --border:#1f2a44;
  --ring:#2563eb;
}

/* Respect both palettes but DO NOT let Windows force recoloring */
html, body, #root, .nexus-root {
  color-scheme: light dark;
  background: var(--bg-app);
  color: var(--ink);
  forced-color-adjust: none;   /* <- disables Windows High-Contrast remapping */
}

* {
  transition: background-color .16s ease, color .16s ease,
              border-color .16s ease, box-shadow .16s ease;
}

@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; }
}

/* Common components (no custom shadow utilities) */
@layer components {
  .panel {
    @apply rounded-2xl border;
    background: var(--bg-panel);
    border-color: var(--border);
    box-shadow: 0 12px 32px -16px rgb(0 0 0 / 0.35);
  }
  .input {
    @apply w-full rounded-xl border bg-transparent px-3 py-2 text-sm;
    border-color: var(--border);
  }
  .btn-primary {
    @apply inline-flex items-center justify-center rounded-full px-4 py-2 text-sm font-medium;
    background: #1E40AF; color: #fff;
  }
}

:focus-visible {
  outline: 0;
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--ring) 35%, transparent);
}

@tailwind base;
@tailwind components;
@tailwind utilities;

/* =======================
   THEME TOKENS
   ======================= */
@layer base {
  :root {
    /* LIGHT — Alabaster paper + black text */
    --bg: 249 250 252;             /* #F9FAFC (Alabaster) */
    --surface: 255 255 255;        /* white */
    --panel: 255 255 255;          /* glass base mixes from this */
    --text: 17 24 39;              /* #111827 near-black */
    --muted: 71 85 105;            /* slate-600 */
    --border: 2 6 23 / 0.10;       /* very subtle */
    --ring: 0 153 255;             /* #0099FF */

    /* Brand blues for buttons/underglow */
    --brand: 0 133 255;            /* #0085FF */
    --brand-2: 0 158 255;          /* #009EFF */

    /* Elevation */
    --elev-1: 0 10px 30px rgba(2, 6, 23, 0.06);
    --elev-2: 0 22px 60px rgba(2, 6, 23, 0.10);
  }

  .dark {
    /* DARK — Cod Gray + white text */
    --bg: 9 11 30;                 /* #090B1E */
    --surface: 13 17 36;           /* #0D1124 */
    --panel: 18 24 42;             /* #121A2A */
    --text: 248 250 252;           /* white-ish */
    --muted: 203 213 225;          /* slate-300 */
    --border: 255 255 255 / 0.10;
    --ring: 0 153 255;             /* #0099FF */
    --brand: 0 133 255;            /* #0085FF */
    --brand-2: 0 158 255;          /* #009EFF */

    --elev-1: 0 12px 32px rgba(0,0,0,.45);
    --elev-2: 0 28px 70px rgba(0,0,0,.60);
  }

  html, body, #root { height: 100%; }

  /* Page backgrounds */
  :root:not(.dark) body {
    color: rgb(var(--text));
    background: rgb(var(--bg));
  }
  .dark body {
    color: rgb(var(--text));
    background: rgb(var(--bg)) !important;       /* flat Cod Gray */
    background-image: none !important;           /* remove halos */
  }
}

/* Smooth theme switch (optional) */
:root.theme-transition * {
  transition: background-color .25s ease, color .25s ease, border-color .25s ease,
             box-shadow .25s ease, fill .25s ease, stroke .25s ease !important;
}

/* =======================
   GLASS PANELS + UNDERGLOW
   Apply to existing .panel wrappers (no layout change)
   ======================= */
@layer components {
  .panel {
    position: relative;
    @apply rounded-2xl border backdrop-blur-xl;
    /* glass: translucent, works in both themes */
    background: color-mix(in oklab, rgb(var(--panel)) 65%, transparent);
    border-color: color-mix(in oklab, rgb(var(--text)) 14%, transparent);
    box-shadow: var(--elev-1);
    /* subtle inner highlight for glass */
    outline: 1px solid color-mix(in oklab, rgb(var(--surface)) 12%, transparent);
  }

  /* Blue underglow that softly matches primary buttons */
  .panel::after {
    content: "";
    position: absolute; inset: -2px -2px -8px -2px;
    pointer-events: none; z-index: 0;
    background:
      radial-gradient(60% 120% at 20% -10%,
        color-mix(in oklab, rgb(var(--brand-2)) 28%, transparent),
        transparent 70%);
    filter: blur(22px);
    opacity: 0.35;                 /* Light */
  }
  .dark .panel::after {
    opacity: 0.45;                 /* a bit stronger in dark */
  }

  /* Lift on hover for interactivity, no layout changes */
  .panel--hover { transition: transform .18s ease, box-shadow .18s ease; }
  .panel--hover:hover { transform: translateY(-2px); box-shadow: var(--elev-2); }

  /* Inputs: crisp glass fields */
  .input {
    @apply h-11 rounded-xl px-3 text-sm outline-none border;
    background: color-mix(in oklab, rgb(var(--surface)) 78%, transparent);
    border-color: color-mix(in oklab, rgb(var(--text)) 16%, transparent);
  }
  .input:focus {
    box-shadow: 0 0 0 3px color-mix(in oklab, rgb(var(--ring)) 45%, transparent);
    border-color: color-mix(in oklab, rgb(var(--ring)) 55%, transparent);
  }

  /* Primary buttons: blue, consistent in both themes */
  .btn-primary {
    @apply inline-flex items-center gap-2 rounded-xl px-4 py-2 text-sm font-semibold;
    color: #fff;
    background: linear-gradient(180deg,
      color-mix(in oklab, rgb(var(--brand)) 96%, white 6%),
      color-mix(in oklab, rgb(var(--brand)) 86%, black 6%));
    box-shadow: 0 10px 26px color-mix(in oklab, rgb(var(--brand)) 30%, transparent);
  }
  .btn-primary:hover { filter: brightness(1.05); }

  /* Pill chips (status) read well in both themes */
  .chip {
    @apply inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs font-medium;
    border-color: color-mix(in oklab, rgb(var(--text)) 14%, transparent);
    background: color-mix(in oklab, rgb(var(--panel)) 70%, transparent);
  }

  /* Disable any previous halo/header glows that fight glass */
  .halo::before { display: none; }
  .dark .halo::before { display: none; }
}

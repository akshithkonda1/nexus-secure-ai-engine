@tailwind base;
@tailwind components;
@tailwind utilities;

/* Allow @apply to resolve Tailwind utilities (v4) */
@reference "tailwindcss";

/* ── Light tokens (used when theme is light) */
:root {
  --bg-app:#f6f7fb;
  --bg-panel:#ffffff;
  --ink:#0f172a;
  --muted:#64748b;
  --border:#e5e7eb;
  --ring:#93c5fd;
}

/* ── Dark tokens (default via .dark class / data-theme="dark") */
:root[data-theme="dark"], .dark {
  --bg-app:#0b1220;
  --bg-panel:#121a2b;
  --ink:#e5e7eb;
  --muted:#94a3b8;
  --border:#1f2a44;
  --ring:#2563eb;
}

html { color-scheme: light dark; }
body { background: var(--bg-app); color: var(--ink); }

/* Smooth transitions */
* {
  transition: background-color .16s ease, color .16s ease, border-color .16s ease, box-shadow .16s ease;
}

@media (prefers-reduced-motion: reduce) {
  * { transition: none !important; }
}

/* Components (no shadow-card usage) */
@layer components {
  .panel {
    @apply rounded-2xl border;
    background: var(--bg-panel);
    border-color: var(--border);
    box-shadow: 0 12px 32px -16px rgb(0 0 0 / 0.35);
  }
  .input {
    @apply w-full rounded-xl border bg-transparent px-3 py-2 text-sm;
    border-color: var(--border);
  }
  .btn-primary {
    @apply inline-flex items-center justify-center rounded-full px-4 py-2 text-sm font-medium;
    background: #1E40AF; color: #fff;
  }
}

/* Focus ring */
:focus-visible {
  outline: 0;
  box-shadow: 0 0 0 3px color-mix(in oklab, var(--ring) 35%, transparent);
}

/* High-contrast guard */
@media (forced-colors: active) {
  html, body, #root, .nexus-root {
    forced-color-adjust: none;
    background: var(--bg-app) !important;
    color: var(--ink) !important;
  }
  :where(.border, [class*="border-"]) { border-color: var(--border) !important; }
}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TestOps Report - {run_id}</title>
  <style>
    body { font-family: "Inter", system-ui, -apple-system, sans-serif; margin: 0; padding: 0; background: #0b1021; color: #e2e8f0; }
    header { padding: 20px; background: linear-gradient(120deg, #111827, #0f172a); box-shadow: 0 2px 12px rgba(0,0,0,0.35); }
    h1 { margin: 0; font-size: 22px; }
    main { padding: 20px; }
    section { margin-bottom: 20px; background: #0f172a; border: 1px solid #1f2937; border-radius: 12px; padding: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.25); }
    table { width: 100%; border-collapse: collapse; font-size: 13px; }
    th, td { border-bottom: 1px solid #1f2937; padding: 8px; text-align: left; }
    th { color: #cbd5e1; font-weight: 600; }
    td.pass { color: #34d399; }
    td.fail { color: #f87171; }
    td.warn { color: #fbbf24; }
    pre { background: #0b1220; color: #cbd5e1; padding: 8px; border-radius: 8px; overflow-x: auto; }
    .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 12px; }
    .charts { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 12px; }
    ul { margin: 0; padding-left: 18px; }
  </style>
</head>
<body>
  <header>
    <h1>Ryuzen Toron v2.5H+ &mdash; TestOps Report ({run_id})</h1>
    <p>Integrated view of SIM, Load, Replay, Pipeline checks, and WAR ROOM.</p>
  </header>
  <main>
    <section>
      <h2>Summary</h2>
      <table>
        <tbody>
          {summary_rows}
        </tbody>
      </table>
    </section>

    <section class="charts">
      <div>{latency_chart}</div>
      <div>{determinism_chart}</div>
      <div>{load_chart}</div>
    </section>

    <section>
      <h2>Subsystem status</h2>
      <table>
        <thead>
          <tr><th>Name</th><th>Status</th><th>Metrics</th><th>Notes</th></tr>
        </thead>
        <tbody>
          {subsystem_rows}
        </tbody>
      </table>
    </section>

    <section>
      <h2>WAR ROOM Findings</h2>
      <table>
        <thead>
          <tr><th>Timestamp</th><th>Severity</th><th>Subsystem</th><th>Message</th><th>Suggestion</th><th>Score</th></tr>
        </thead>
        <tbody>
          {warroom_rows}
        </tbody>
      </table>
    </section>

    <section>
      <h2>Pipeline checker</h2>
      <ul>
        {pipeline_notes}
      </ul>
    </section>

    <section>
      <h2>Snapshot metadata</h2>
      <pre>{snapshot_metadata}</pre>
    </section>
  </main>
</body>
</html>
